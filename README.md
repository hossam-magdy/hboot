# HBoot

A homemade â€œmulti-partitionâ€ â€œmulti-iso-bootâ€ USB disk: install Ubuntu, Windows 7/8/8.1/10, load WindowsPE, and more â€¦

## Overview
A brief explanation of:

### â€œmulti-partitionâ€
USB disk will have 2 partitions:

- NTFS partition for all â€œBootâ€ files (ISO files, grldr, firadisk, â€¦)
- NTFS partition for regular â€œDataâ€ usage
- Windows OS allows access to only one partition for any removable device. So, making the â€œDataâ€ partition accessible (visible) to Windows ensures security to all boot files (the entire â€œBootâ€ partition is hidden). Even if anyone tried to format your USB disk using regular windows format, it will format only the visible partition.

So, your boot files are protected as long as you set the â€œDataâ€ partition as the visible one.

### â€œmulti-bootâ€
USB disk can boot from the following:

- Windows XP/7/10 installation ISO (you can install any version of windows)
- Windows PE (Preinstalled Environment) ISO
- Ubuntu ISO (i.e: live/installation)
- Hirenâ€™s BootCD ISO
- Ultimate BootCD ISO
- Acronis Disk Director ISO
- Acronis True Image ISO
- Norton Ghost (2003/v15) IMG/ISO
- and possibly more â€¦

**Screenshot**

![Screenshot](./docs/HBoot-screenshot.png)

- Technically speaking (beginner? jump to Steps):
- The grub4dos will be written to the MBR of the USB disk to boot from â€œgrldrâ€ file that exists at root of any partition.
- The â€œmenu.lstâ€ file is pre-configured and categorized based on existing ISO files. Recognized ISOâ€™s are loaded directly. Unrecognized ISOâ€™s are loaded through boot option â€œ( Choose ISO )â€ which loads â€œmenuISOFileList.lstâ€œ..
- The â€œmenuISOFileList.lstâ€ file is automatically generated by â€œ.[ReOrganizeFiles].batâ€œ.
- USB disk partition table will be:
  ![Screenshot](./docs/HBoot-partition-table.png)
- Swapping/switching partitions can be done from booting options (thanks to Steve).
- â€œ.[SwitchPartitions].batâ€ uses an embedded â€œBOOTICE.exeâ€ to modify partition table by setting parameter /firstpart=1.

## Steps to create your multi-partition multi-boot USB Disk

**CAUTION:**
Make sure your USB disk has no important data.
You take full responsibility of any data loss or HDD damage resulting from the following steps.
However, if you followed the guide in a step-by-step manner, no data should be lost.
DO NOT CONTINUE IF YOU DO NOT KNOW WHAT YOU ARE DOING.

1. Clone the â€œHBoot-Filesâ€œ
2. Using â€œBOOTICE.exeâ€ (in â€œHBoot-Tools.zipâ€œ), follow the screenshot below (blue marks are optional/changeable):

  ![Tutorial](./docs/HBoot-tutorial-windows.png)

3. Copy the ISO files to the boot partition
(preferable by drag-n-drop to â€œ.[ReOrganizeFiles].batâ€œ)
(download links can be found at the beginning of â€œmenu.lstâ€œ)
4. Run â€œ.[ReOrganizeFiles].batâ€ to ensure ISO contigousiness (i.e: donâ€™t need defrag) & to protect boot files.

## Notes:
- Using â€œ.[SwitchPartitions].batâ€ you can switch/swap between â€œBootâ€ and â€œDataâ€ partitions.

  You can switch also using â€œBOOTICEâ€ => â€œParts Manageâ€ => â€œSet Accessibleâ€
- Using â€œ.[ReOrganizeFiles].batâ€ you can:
  - Copy files contiguously (if possible) by opening/dragging-dropping them with the â€œ.[ReOrganizeFiles].batâ€ file.
  - Verify that all ISO files are contiguous (must be so, to boot).
  - Hide/protect critical boot files & show/unhide all other files (useful in case of some malware infection).
  - Remove (from root folder only) :
    - shortcut files (*.lnk)
    - vbScript files (*.vbs)
    - JavaScript files (*.js)
    - â€œAutorun.infâ€ file created by some malwares
    - â€œSystem Volume Informationâ€ folder
    - â€œRecyclerâ€ folder
    - â€œRECYCLEâ€ file/folder created by some malwares
  - Rebuild â€œAutorun.infâ€ file for elegant USB icon (also overwrites the inf file created by some malwares)
- Any ISO file must be placed at the root of the â€œBootâ€ partition.
- Some ISO files are pre-configured for booting, to make use of this, ISO file name should be as configured in â€œmenu.lstâ€ (for advanced users)

I hope this would be useful to someone.

Good Luck ğŸ˜‰
